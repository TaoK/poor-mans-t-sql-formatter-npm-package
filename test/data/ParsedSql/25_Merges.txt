<SqlRoot><SqlStatement><SingleLineComment>Samples adapted from MSDN: http://msdn.microsoft.com/en-us/library/bb510625.aspx
</SingleLineComment><SingleLineComment> Note: some of these samples require compatibility level 100 (SQL 2008)
</SingleLineComment><WhiteSpace>
</WhiteSpace><SingleLineComment>MERGE with OUTPUT INTO
</SingleLineComment><Clause><DDLOtherBlock><OtherKeyword>CREATE</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#MatchReasons</Other><WhiteSpace> </WhiteSpace><DDLParens><Other>Name</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>NVarChar</DataTypeKeyword><DDLDetailParens><NumberValue>50</NumberValue></DDLDetailParens><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>ReasonType</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>NVarChar</DataTypeKeyword><DDLDetailParens><NumberValue>50</NumberValue></DDLDetailParens></DDLParens><Semicolon>;</Semicolon><WhiteSpace>
</WhiteSpace></DDLOtherBlock></Clause></SqlStatement><SqlStatement><Clause><DDLDeclareBlock><OtherKeyword>DECLARE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>@SummaryOfChanges</Other><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><DDLParens><Other>Change</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>VARCHAR</DataTypeKeyword><DDLDetailParens><NumberValue>20</NumberValue></DDLDetailParens></DDLParens><Semicolon>;</Semicolon><WhiteSpace>

</WhiteSpace></DDLDeclareBlock></Clause></SqlStatement><SqlStatement><Clause><MergeClause><ContainerOpen><OtherKeyword>MERGE</OtherKeyword></ContainerOpen><MergeTarget><WhiteSpace> </WhiteSpace><OtherKeyword>INTO</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#MatchReasons</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Target</Other><WhiteSpace>
</WhiteSpace></MergeTarget><MergeUsing><ContainerOpen><OtherKeyword>USING</OtherKeyword></ContainerOpen><SelectionTarget><WhiteSpace> </WhiteSpace><SelectionTargetParens><Clause><OtherKeyword>VALUES</OtherKeyword><WhiteSpace> </WhiteSpace><DDLParens><String>Name1</String><Comma>,</Comma><String>Reason1</String></DDLParens><Comma>,</Comma><WhiteSpace> </WhiteSpace><DDLParens><String>Name2</String><Comma>,</Comma><WhiteSpace> </WhiteSpace><String>Reason2</String></DDLParens><Comma>,</Comma><WhiteSpace> </WhiteSpace><DDLParens><String>Name3</String><Comma>,</Comma><WhiteSpace> </WhiteSpace><String>Reason3</String></DDLParens></Clause></SelectionTargetParens><WhiteSpace>
       </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Source</Other><WhiteSpace> </WhiteSpace><FunctionParens><Other>NewName</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>NewReasonType</Other></FunctionParens><WhiteSpace>
</WhiteSpace></SelectionTarget></MergeUsing><MergeCondition><ContainerOpen><OtherKeyword>ON</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><Other>Target</Other><Period>.</Period><Other>Name</Other><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><Other>Source</Other><Period>.</Period><Other>NewName</Other><WhiteSpace>
</WhiteSpace><And><OtherKeyword>and</OtherKeyword></And><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><WhiteSpace> 
</WhiteSpace></ContainerContentBody></MergeCondition><MergeWhen><ContainerOpen><OtherKeyword>WHEN</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><OtherKeyword>MATCHED</OtherKeyword><WhiteSpace> </WhiteSpace></ContainerContentBody><MergeThen><ContainerOpen><OtherKeyword>THEN</OtherKeyword></ContainerOpen><MergeAction><SqlStatement><WhiteSpace>
	</WhiteSpace><Clause><OtherKeyword>UPDATE</OtherKeyword><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SET</OtherKeyword><WhiteSpace> </WhiteSpace><Other>ReasonType</Other><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><Other>Source</Other><Period>.</Period><Other>NewReasonType</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement></MergeAction></MergeThen></MergeWhen><MergeWhen><ContainerOpen><OtherKeyword>WHEN</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><AlphaOperator>NOT</AlphaOperator><WhiteSpace> </WhiteSpace><OtherKeyword>MATCHED</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>BY</OtherKeyword><WhiteSpace> </WhiteSpace><Other>TARGET</Other><WhiteSpace> </WhiteSpace></ContainerContentBody><MergeThen><ContainerOpen><OtherKeyword>THEN</OtherKeyword></ContainerOpen><MergeAction><SqlStatement><WhiteSpace>
	</WhiteSpace><Clause><OtherKeyword>INSERT</OtherKeyword><WhiteSpace> </WhiteSpace><DDLParens><Other>Name</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>ReasonType</Other></DDLParens><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>VALUES</OtherKeyword><WhiteSpace> </WhiteSpace><DDLParens><Other>NewName</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>NewReasonType</Other></DDLParens><WhiteSpace>
</WhiteSpace></Clause></SqlStatement></MergeAction></MergeThen></MergeWhen></MergeClause></Clause><Clause><OtherKeyword>OUTPUT</OtherKeyword><WhiteSpace> </WhiteSpace><PseudoName>$action</PseudoName><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>INTO</OtherKeyword><WhiteSpace> </WhiteSpace><Other>@SummaryOfChanges</Other><Semicolon>;</Semicolon><WhiteSpace>

</WhiteSpace></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Change</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><FunctionKeyword>COUNT</FunctionKeyword><FunctionParens><Asterisk>*</Asterisk></FunctionParens><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>CountPerChange</Other><WhiteSpace>
</WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>@SummaryOfChanges</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause><Clause><OtherKeyword>GROUP</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>BY</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Change</Other><Semicolon>;</Semicolon><WhiteSpace>

</WhiteSpace></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>DROP</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#MatchReasons</Other><WhiteSpace>


</WhiteSpace></Clause></SqlStatement><SqlStatement><SingleLineComment>INSERT INTO, MERGE and OUTPUT
</SingleLineComment><Clause><DDLOtherBlock><OtherKeyword>CREATE</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
    </WhiteSpace><DDLParens><Other>ProductID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>INT</DataTypeKeyword><WhiteSpace> </WhiteSpace><AlphaOperator>NOT</AlphaOperator><WhiteSpace> </WhiteSpace><OtherKeyword>NULL</OtherKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>LocationID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>NewQty</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>PreviousQty</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword></DDLParens><Semicolon>;</Semicolon><WhiteSpace>
</WhiteSpace></DDLOtherBlock></Clause></SqlStatement><SqlStatement><Clause><DDLOtherBlock><OtherKeyword>CREATE</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
    </WhiteSpace><DDLParens><Other>ProductID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>INT</DataTypeKeyword><WhiteSpace> </WhiteSpace><AlphaOperator>NOT</AlphaOperator><WhiteSpace> </WhiteSpace><OtherKeyword>NULL</OtherKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>LocationID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Quantity</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword></DDLParens><Semicolon>;</Semicolon><WhiteSpace>
</WhiteSpace></DDLOtherBlock></Clause></SqlStatement><BatchSeparator><OtherKeyword>GO</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><CompoundKeyword simpleText="INSERT INTO"><OtherKeyword>INSERT</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>INTO</OtherKeyword></CompoundKeyword><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>100</NumberValue><WhiteSpace>
</WhiteSpace></Clause><Clause><SetOperatorClause><OtherKeyword>UNION</OtherKeyword></SetOperatorClause><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>2</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>5</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>1000</NumberValue><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><BatchSeparator><OtherKeyword>go</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Asterisk>*</Asterisk><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause></SqlStatement><BatchSeparator><OtherKeyword>go</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><CompoundKeyword simpleText="INSERT INTO"><OtherKeyword>INSERT</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>INTO</OtherKeyword></CompoundKeyword><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
</WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Other>ProductID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>LocationID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>NewQty</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>PreviousQty</Other><WhiteSpace> 
</WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace>
</WhiteSpace><SelectionTargetParens><WhiteSpace>    </WhiteSpace><Clause><MergeClause><ContainerOpen><OtherKeyword>MERGE</OtherKeyword></ContainerOpen><MergeTarget><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>RI</Other><WhiteSpace>
     </WhiteSpace></MergeTarget><MergeUsing><ContainerOpen><OtherKeyword>USING</OtherKeyword></ContainerOpen><SelectionTarget><WhiteSpace> </WhiteSpace><SelectionTargetParens><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>100</NumberValue><WhiteSpace> </WhiteSpace></Clause><Clause><SetOperatorClause><OtherKeyword>UNION</OtherKeyword></SetOperatorClause><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>2</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>500</NumberValue></Clause></SelectionTargetParens><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>src</Other><WhiteSpace> </WhiteSpace><FunctionParens><Other>ProductID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>OrderQty</Other></FunctionParens><WhiteSpace>
     </WhiteSpace></SelectionTarget></MergeUsing><MergeCondition><ContainerOpen><OtherKeyword>ON</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>ProductID</Other><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>ProductID</Other><WhiteSpace>
    </WhiteSpace></ContainerContentBody></MergeCondition><MergeWhen><ContainerOpen><OtherKeyword>WHEN</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><OtherKeyword>MATCHED</OtherKeyword><WhiteSpace> </WhiteSpace><And><OtherKeyword>AND</OtherKeyword></And><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherOperator>-</OtherOperator><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>OrderQty</Other><WhiteSpace> </WhiteSpace><OtherOperator>&gt;</OtherOperator><WhiteSpace> </WhiteSpace><NumberValue>0</NumberValue><WhiteSpace> 
        </WhiteSpace></ContainerContentBody><MergeThen><ContainerOpen><OtherKeyword>THEN</OtherKeyword></ContainerOpen><MergeAction><SqlStatement><WhiteSpace> </WhiteSpace><Clause><OtherKeyword>UPDATE</OtherKeyword><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SET</OtherKeyword><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherOperator>-</OtherOperator><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>OrderQty</Other><WhiteSpace>
    </WhiteSpace></Clause></SqlStatement></MergeAction></MergeThen></MergeWhen><MergeWhen><ContainerOpen><OtherKeyword>WHEN</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><OtherKeyword>MATCHED</OtherKeyword><WhiteSpace> </WhiteSpace><And><OtherKeyword>AND</OtherKeyword></And><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherOperator>-</OtherOperator><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>OrderQty</Other><WhiteSpace> </WhiteSpace><OtherOperator>&lt;=</OtherOperator><WhiteSpace> </WhiteSpace><NumberValue>0</NumberValue><WhiteSpace> 
        </WhiteSpace></ContainerContentBody><MergeThen><ContainerOpen><OtherKeyword>THEN</OtherKeyword></ContainerOpen><MergeAction><SqlStatement><WhiteSpace> </WhiteSpace><Clause><OtherKeyword>DELETE</OtherKeyword><WhiteSpace>
    </WhiteSpace></Clause></SqlStatement></MergeAction></MergeThen></MergeWhen></MergeClause></Clause><Clause><OtherKeyword>OUTPUT</OtherKeyword><WhiteSpace> </WhiteSpace><PseudoName>$action</PseudoName><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Deleted</Other><Period>.</Period><Other>ProductID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Deleted</Other><Period>.</Period><Other>LocationID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Inserted</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>NewQty</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Deleted</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>PreviousQty</Other></Clause></SelectionTargetParens><WhiteSpace>
 </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Changes</Other><WhiteSpace> </WhiteSpace><FunctionParens><Other>Action</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>ProductID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>LocationID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>NewQty</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>PreviousQty</Other></FunctionParens><WhiteSpace> 
</WhiteSpace></SelectionTarget></Clause><Clause><OtherKeyword>WHERE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Action</Other><WhiteSpace> </WhiteSpace><AlphaOperator>IN</AlphaOperator><WhiteSpace> </WhiteSpace><InParens><String>UPDATE</String><Comma>,</Comma><WhiteSpace> </WhiteSpace><String>DELETE</String></InParens><Semicolon>;</Semicolon><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><BatchSeparator><OtherKeyword>GO</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Asterisk>*</Asterisk><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Asterisk>*</Asterisk><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>DROP</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>DROP</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><BatchSeparator><OtherKeyword>GO</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>


</WhiteSpace><SingleLineComment>same sample with OUTPUT INTO instead (can't use a WHERE clause though, this way)
</SingleLineComment><Clause><DDLOtherBlock><OtherKeyword>CREATE</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
    </WhiteSpace><DDLParens><Other>ProductID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>INT</DataTypeKeyword><WhiteSpace> </WhiteSpace><AlphaOperator>NOT</AlphaOperator><WhiteSpace> </WhiteSpace><OtherKeyword>NULL</OtherKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>LocationID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>NewQty</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>PreviousQty</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword></DDLParens><Semicolon>;</Semicolon><WhiteSpace>
</WhiteSpace></DDLOtherBlock></Clause></SqlStatement><SqlStatement><Clause><DDLOtherBlock><OtherKeyword>CREATE</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
    </WhiteSpace><DDLParens><Other>ProductID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>INT</DataTypeKeyword><WhiteSpace> </WhiteSpace><AlphaOperator>NOT</AlphaOperator><WhiteSpace> </WhiteSpace><OtherKeyword>NULL</OtherKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>LocationID</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Quantity</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword></DDLParens><Semicolon>;</Semicolon><WhiteSpace>
</WhiteSpace></DDLOtherBlock></Clause></SqlStatement><BatchSeparator><OtherKeyword>GO</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><CompoundKeyword simpleText="INSERT INTO"><OtherKeyword>INSERT</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>INTO</OtherKeyword></CompoundKeyword><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>100</NumberValue><WhiteSpace>
</WhiteSpace></Clause><Clause><SetOperatorClause><OtherKeyword>UNION</OtherKeyword></SetOperatorClause><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>2</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>5</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>1000</NumberValue><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><BatchSeparator><OtherKeyword>go</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Asterisk>*</Asterisk><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause></SqlStatement><BatchSeparator><OtherKeyword>go</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
    </WhiteSpace><Clause><MergeClause><ContainerOpen><OtherKeyword>MERGE</OtherKeyword></ContainerOpen><MergeTarget><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>RI</Other><WhiteSpace>
     </WhiteSpace></MergeTarget><MergeUsing><ContainerOpen><OtherKeyword>USING</OtherKeyword></ContainerOpen><SelectionTarget><WhiteSpace> </WhiteSpace><SelectionTargetParens><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>100</NumberValue><WhiteSpace> </WhiteSpace></Clause><Clause><SetOperatorClause><OtherKeyword>UNION</OtherKeyword></SetOperatorClause><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>2</NumberValue><Comma>,</Comma><WhiteSpace> </WhiteSpace><NumberValue>500</NumberValue></Clause></SelectionTargetParens><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>src</Other><WhiteSpace> </WhiteSpace><FunctionParens><Other>ProductID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>OrderQty</Other></FunctionParens><WhiteSpace>
     </WhiteSpace></SelectionTarget></MergeUsing><MergeCondition><ContainerOpen><OtherKeyword>ON</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>ProductID</Other><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>ProductID</Other><WhiteSpace>
    </WhiteSpace></ContainerContentBody></MergeCondition><MergeWhen><ContainerOpen><OtherKeyword>WHEN</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><OtherKeyword>MATCHED</OtherKeyword><WhiteSpace> </WhiteSpace><And><OtherKeyword>AND</OtherKeyword></And><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherOperator>-</OtherOperator><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>OrderQty</Other><WhiteSpace> </WhiteSpace><OtherOperator>&gt;</OtherOperator><WhiteSpace> </WhiteSpace><NumberValue>0</NumberValue><WhiteSpace> 
        </WhiteSpace></ContainerContentBody><MergeThen><ContainerOpen><OtherKeyword>THEN</OtherKeyword></ContainerOpen><MergeAction><SqlStatement><WhiteSpace> </WhiteSpace><Clause><OtherKeyword>UPDATE</OtherKeyword><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>SET</OtherKeyword><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><EqualsSign>=</EqualsSign><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherOperator>-</OtherOperator><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>OrderQty</Other><WhiteSpace>
    </WhiteSpace></Clause></SqlStatement></MergeAction></MergeThen></MergeWhen><MergeWhen><ContainerOpen><OtherKeyword>WHEN</OtherKeyword></ContainerOpen><ContainerContentBody><WhiteSpace> </WhiteSpace><OtherKeyword>MATCHED</OtherKeyword><WhiteSpace> </WhiteSpace><And><OtherKeyword>AND</OtherKeyword></And><WhiteSpace> </WhiteSpace><Other>RI</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherOperator>-</OtherOperator><WhiteSpace> </WhiteSpace><Other>src</Other><Period>.</Period><Other>OrderQty</Other><WhiteSpace> </WhiteSpace><OtherOperator>&lt;=</OtherOperator><WhiteSpace> </WhiteSpace><NumberValue>0</NumberValue><WhiteSpace> 
        </WhiteSpace></ContainerContentBody><MergeThen><ContainerOpen><OtherKeyword>THEN</OtherKeyword></ContainerOpen><MergeAction><SqlStatement><WhiteSpace> </WhiteSpace><Clause><OtherKeyword>DELETE</OtherKeyword><WhiteSpace>
    </WhiteSpace></Clause></SqlStatement></MergeAction></MergeThen></MergeWhen></MergeClause></Clause><Clause><OtherKeyword>OUTPUT</OtherKeyword><WhiteSpace> </WhiteSpace><Other>Deleted</Other><Period>.</Period><Other>ProductID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Deleted</Other><Period>.</Period><Other>LocationID</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Inserted</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>NewQty</Other><Comma>,</Comma><WhiteSpace> </WhiteSpace><Other>Deleted</Other><Period>.</Period><Other>Quantity</Other><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>PreviousQty</Other><WhiteSpace>
		</WhiteSpace></Clause><Clause><OtherKeyword>INTO</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
	</WhiteSpace></Clause><Clause><OtherKeyword>OPTION</OtherKeyword><WhiteSpace> </WhiteSpace><DDLParens><OtherKeyword>FAST</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>10</NumberValue></DDLParens><WhiteSpace>
	</WhiteSpace><Semicolon>;</Semicolon><WhiteSpace>
		
</WhiteSpace></Clause></SqlStatement><BatchSeparator><OtherKeyword>GO</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Asterisk>*</Asterisk><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><Asterisk>*</Asterisk><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>FROM</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></SelectionTarget></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>DROP</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#UpdatedInventory</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>DROP</OtherKeyword><WhiteSpace> </WhiteSpace><OtherKeyword>TABLE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>#ReferenceInventory</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><BatchSeparator><OtherKeyword>GO</OtherKeyword></BatchSeparator><SqlStatement><WhiteSpace>
</WhiteSpace><SingleLineComment>Variable initializer using Subquery; not directly related to MERGE, but also 2008-specific
</SingleLineComment><Clause><DDLDeclareBlock><OtherKeyword>DECLARE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>@SomeValue</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><EqualsSign>=</EqualsSign><ContainerContentBody><ExpressionParens><Clause><OtherKeyword>select</OtherKeyword><WhiteSpace> </WhiteSpace><Other>the</Other><WhiteSpace> </WhiteSpace><Other>thing</Other><WhiteSpace> </WhiteSpace></Clause><Clause><OtherKeyword>from</OtherKeyword><SelectionTarget><WhiteSpace> </WhiteSpace><Other>the</Other><WhiteSpace> </WhiteSpace><Other>place</Other><WhiteSpace> </WhiteSpace></SelectionTarget></Clause><Clause><OtherKeyword>where</OtherKeyword><WhiteSpace> </WhiteSpace><Other>tis</Other><WhiteSpace> </WhiteSpace><Other>found</Other></Clause></ExpressionParens><WhiteSpace>
</WhiteSpace></ContainerContentBody></DDLDeclareBlock></Clause></SqlStatement><SqlStatement><Clause><DDLDeclareBlock><OtherKeyword>DECLARE</OtherKeyword><WhiteSpace> </WhiteSpace><Other>@SomeOtherValue</Other><WhiteSpace> </WhiteSpace><DataTypeKeyword>int</DataTypeKeyword><EqualsSign>=</EqualsSign><ContainerContentBody><WhiteSpace> </WhiteSpace><FunctionKeyword>Convert</FunctionKeyword><FunctionParens><DataTypeKeyword>int</DataTypeKeyword><Comma>,</Comma><WhiteSpace> </WhiteSpace><String>1</String></FunctionParens><WhiteSpace>
</WhiteSpace></ContainerContentBody></DDLDeclareBlock></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue><WhiteSpace> </WhiteSpace><OtherKeyword>as</OtherKeyword><WhiteSpace> </WhiteSpace><Other>two</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement><SqlStatement><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><ExpressionParens><Clause><OtherKeyword>SELECT</OtherKeyword><WhiteSpace> </WhiteSpace><NumberValue>1</NumberValue></Clause></ExpressionParens><WhiteSpace> </WhiteSpace><OtherKeyword>AS</OtherKeyword><WhiteSpace> </WhiteSpace><Other>t</Other><WhiteSpace>
</WhiteSpace></Clause></SqlStatement></SqlRoot>